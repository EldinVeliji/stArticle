<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
    integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"
    integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"
    crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"
    integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1"
    crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"
    integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM"
    crossorigin="anonymous"></script>

<div class="bg-white">
    <nav class="navbar navbar-white bg-white">
        <a class="navbar-brand text-center" href="#">
            powered by stArticle
        </a>
        <a href="{{url_for('articles')}}" class="btn btn-success">Go back</a>
    </nav>
    <script>


        function numberWithCommas(x) {
            return x.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",");
        }
        CountriesUrl = "https://coronavirus-19-api.herokuapp.com/countries";
        allData = "https://coronavirus-19-api.herokuapp.com/all";
        data = ""
        function xhrRequest(url) {
            var xhttp = new XMLHttpRequest();
            xhttp.onreadystatechange = function () {
                if (this.readyState == 4 && this.status == 200) {
                    data = xhttp.responseText;
                    // alert(data);
                    dataParsed = JSON.parse(data);
                    dataField = document.getElementsByClassName('worldData');
                    dataField[0].innerText = numberWithCommas(dataParsed.cases);
                    dataField[1].innerText = numberWithCommas(dataParsed.deaths);
                    dataField[2].innerText = numberWithCommas(dataParsed.recovered);
                    // alert(dataParsed);
                }
            };
            xhttp.open("GET", url, true);
            xhttp.send();
        }
        xhrRequest(allData);

    </script>
    <div class="col-xl-3 col-md-3 mb-2">
        <div class="card border-left-info shadow h-500 py-2">
            <div class="card-body">
                <div class="row no-gutters align-items-center">
                    <div class="col mr-2">
                        <div class="text-xs font-weight-bold text-info text-uppercase mb-1">
                            Total Cases
                        </div>
                        <div class="row no-gutters align-items-center">
                            <div class="col-auto">
                                <div class="h5 mb-0 mr-3 font-weight-bold text-gray-800 worldData">
                                    Loading...
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-auto">
                        <i class="fa fa-users fa-2x text-info"></i>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="col-xl-3 col-md-3 mb-2">
        <div class="card border-left-danger shadow h-500 py-2">
            <div class="card-body">
                <div class="row no-gutters align-items-center">
                    <div class="col mr-2">
                        <div class="text-xs font-weight-bold text-danger text-uppercase mb-1">
                            Total Death
                        </div>
                        <div class="row no-gutters align-items-center">
                            <div class="col-auto">
                                <div class="h5 mb-0 mr-3 font-weight-bold text-gray-800 worldData">
                                    Loading...
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-auto">
                        <i class="fa fa-bed fa-2x text-danger"></i>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="col-xl-3 col-md-3 mb-4">
        <div class="card border-left-success shadow h-500 py-2">
            <div class="card-body">
                <div class="row no-gutters align-items-center">
                    <div class="col mr-2">
                        <div class="text-xs font-weight-bold text-success text-uppercase mb-1">
                            Total Recovered
                        </div>
                        <div class="row no-gutters align-items-center">
                            <div class="col-auto">
                                <div class="h5 mb-0 mr-3 font-weight-bold text-gray-800 worldData">
                                    Loading...
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-auto">
                        <i class="fa fa-child fa-2x text-success"></i>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
</div>
</div>
<table class="table table-white table-responsive-lg">
    <thead>
        <tr>
            <th scope="col">Country</th>
            <th scope="col">Total Cases</th>
            <th scope="col">New Cases</th>
            <th scope="col">Total Deaths</th>
            <th scope="col">New Deaths</th>
            <th scope="col">Total Recovered</th>
            <th scope="col">Active Cases</th>
        </tr>
    </thead>
    <tbody>
        <script>
            albaniaData = "https://coronavirus-19-api.herokuapp.com/countries/Albania";
            var xhttp = new XMLHttpRequest();
            xhttp.onreadystatechange = function () {
                if (this.readyState == 4 && this.status == 200) {
                    data = xhttp.responseText;
                    dataParsed = JSON.parse(data);
                    dataField = document.getElementsByClassName('albaniaData');
                    dataField[1].innerText = dataParsed.cases;
                    dataField[2].innerText = dataParsed.todayCases;
                    dataField[3].innerText = dataParsed.deaths;
                    dataField[4].innerText = dataParsed.todayDeaths;
                    dataField[5].innerText = dataParsed.recovered;
                    dataField[6].innerText = dataParsed.active;
                }
            };
            xhttp.open("GET", albaniaData, true);
            xhttp.send();

        </script>
        <tr>
            <th scope="row" class="albaniaData">Albania</th>
            <td class="albaniaData">Loading...</td>
            <td class="albaniaData">Loading...</td>
            <td class="albaniaData">Loading...</td>
            <td class="albaniaData">Loading...</td>
            <td class="albaniaData">Loading...</td>
            <td class="albaniaData">Loading...</td>
        </tr>
        <script>
            var xhttp1 = new XMLHttpRequest();
            xhttp1.onreadystatechange = function () {
                if (this.readyState == 4 && this.status == 200) {
                    data1 = xhttp1.responseText;
                    dataParsed1 = JSON.parse(data1);

                    table = document.getElementsByTagName('table');
                    for (var i = 0; i <= dataParsed1.length; i++) {
                        $(table).find('tbody').append('<tr><th scope="row">' + dataParsed1[i].country + '</th><td>' + numberWithCommas(dataParsed1[i].cases) + '</td><td>' + numberWithCommas(dataParsed1[i].todayCases) + '</td><td>' + numberWithCommas(dataParsed1[i].deaths) + '</td><td>' + numberWithCommas(dataParsed1[i].todayDeaths) + '</td><td>' + numberWithCommas(dataParsed1[i].recovered) + '</td><td>' + numberWithCommas(dataParsed1[i].active) + '</td></tr>');
                        // alert(data1);
                    }
                }
            };
            xhttp1.open("GET", CountriesUrl, true);
            xhttp1.send();
        </script>
    </tbody>
</table>
</div>